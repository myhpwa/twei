{"version":3,"sources":["models/Settings.tsx","redux/reducers/setReducer.tsx","models/TmpSettings.tsx","redux/reducers/index.tsx","redux/reducers/tmpSetReducer.tsx","Apis.ts","models/CarrierInvChk.ts","pages/EInvoiceListPage.tsx","components/ShareTextModal.tsx","pages/DetailPage.tsx","pages/WinningListPage.tsx","App.tsx","redux/store.tsx","serviceWorkerRegistration.ts","index.tsx","Globals.tsx","pages/SettingsPage.tsx","../node_modules/@ionic/core/dist/esm-es5 lazy /^/.//.*/.entry/.js$/ groupOptions: {} namespace object","../node_modules/ionicons/dist/esm-es5 lazy /^/.//.*/.entry/.js$/ groupOptions: {} namespace object"],"names":["Settings","version","hasAppLog","theme","uiFontSize","cardNo","cardEncrypt","updateUi","newSettings","document","body","classList","length","remove","item","toggle","Globals","updateCssVars","TmpSettings","fetchError","isLoadingData","qryWinningList","carrierInvChkDetailsExt","shareTextModal","text","show","combineReducers","settings","state","action","type","JSON","parse","localStorage","getItem","storeFile","key","val","forEach","test","setItem","stringify","Object","keys","defaultSettings","undefined","tmpSettings","newState","eInvUrl","axiosInstance","axios","create","baseURL","timeout","headers","lookupDate","a","date","Date","month","getMonth","invTerm","getFullYear","toString","padStart","post","qs","UUID","res","data","carrierInvChkDetailDate","detail","invDate","year","invoiceTime","findMonthStartDateEndDate","d","endDate","startDate","getDate","isLogin","endPoint","now","Math","ceil","valueOf","dates","cardType","onlyWinningInv","uuid","timeStamp","expTimeStamp","Error","code","msg","details","sort","b","invNum","WinningStatus","Apis","carrierInvChk","carrierInvDetail","winningStatusToString","status","Super","Special","First","Second","Third","Forth","Fifth","Sixth","SixthEx","NoAward","_EInvoiceListPage","props","page","rows","dataParts","dateSel","popover","event","isScrollOn","showConfrimSaveFormAlert","showToast","toastMessage","this","fetchDataAndShow","setIsLoading","fetchData","showDataPageByPage","res2","dispatch","v","i","winningStatus","calculateInvoiceWinningStatus","value","fromStart","slice","setState","substring","winningList","NotYet","firstPrizeNos","firstPrizeNo1","firstPrizeNo2","firstPrizeNo3","firstPrizeNo4","firstPrizeNo5","firstPrizeNo6","firstPrizeNo7","firstPrizeNo8","firstPrizeNo9","firstPrizeNo10","sixthPrizeNos","sixthPrizeNo1","sixthPrizeNo2","sixthPrizeNo3","sixthPrizeNo4","sixthPrizeNo5","sixthPrizeNo6","superPrizeNo","spcPrizeNo","spcPrizeNo2","spcPrizeNo3","some","no","Array","index","row","button","onClick","history","push","pwaUrl","tabIndex","className","amount","sellerName","slot","displayFormat","doneText","cancelText","onIonChange","e","style","textAlign","cssClass","isOpen","message","placeholder","fill","shape","size","getRows","threshold","disabled","onIonInfinite","ev","target","complete","loadingText","backdropDismiss","header","buttons","handler","logout","onDidDismiss","duration","React","Component","EInvoiceListPage","withIonLifeCycle","connect","_ShareTextModal","isAppSettingsExport","appSettings","appSettingsString","filter","map","keyVal","join","appUrl","hasQueryString","copyToClipboard","qrcCanvas","getElementById","qrcode","showModal","swipeToClose","onWillPresent","updateQrCode","finish","display","flexDirection","height","alignItems","flexGrow","flexShrink","margin","id","width","checked","_DetailPage","match","params","replaceAll","cid","goBack","icon","arrowBack","color","lines","sellerBan","sellerAddress","fontWeight","description","quantity","DetailPage","_WinningListPage","maxDate","currentDate","qwl","monthValues","monthShortNames","WinningListPage","electronBackendApi","window","store","savedSettingsStr","createStore","reducer","getSavedStore","setupConfig","mode","swipeBackEnabled","serviceWorkCallbacks","onSuccess","registration","onUpdate","_App","AppOrig","_AppOrig","registrationNew","originalAppSettingsStr","wakeLock","disableAppLog","receive","send","queryParams","queryString","location","search","split","setting","showUpdateAlert","showRestoreAppSettingsToast","speechSynthesis","getVoices","cancel","navigator","wakeLockScreen","addEventListener","visibilityState","wakeLockScreenRelease","indexedDB","open","tweiDb","onupgradeneeded","result","createObjectStore","console","log","request","error","name","stack","release","routeMatches","exec","queryMatches","route","decodeURIComponent","query","to","pathname","animated","path","render","exact","SettingsPage","routeByQueryString","tab","href","receipt","trophy","onDidPresent","installing","postMessage","waiting","ShareTextModal","role","restoreAppSettings","App","withRouter","isLocalhost","Boolean","hostname","registerValidSW","swUrl","config","serviceWorker","register","then","onupdatefound","installingWorker","onstatechange","controller","catch","enableAppLog","ReactDOM","URL","process","origin","fetch","response","contentType","get","indexOf","ready","unregister","reload","checkValidServiceWorker","fileName","dbOpenReq","Promise","ok","fail","onsuccess","db","trans","transaction","req","objectStore","_ev","err","transWrite","reqWrite","put","onerror","delete","clearIndexedDB","clear","consoleLog","bind","consoleError","isMacCatalyst","isPlatform","platform","bugReportApiUrl","getLog","from","arguments","apply","fetchErrorContent","fontSize","paddingTop","updateApp","resolve","getRegistrations","regs","all","reg","update","newReg","hasUpdates","reduce","prev","curr","documentElement","cssText","isTouchDevice","isStoreApps","getFileFromIndexedDB","saveFileToIndexedDB","removeFileFromIndexedDB","clearAppData","clipboard","writeText","_SettingsPage","reportText","showBugReportAlert","showFontLicense","showClearAlert","barcode","shareSocial","PackageInfos","pwaVersion","hidden","mainVersion","informationCircle","bug","isChecked","userAgent","subHeader","inputs","name0","subject","productName","name1","download","settingsJsonUri","encodeURIComponent","createElement","click","accept","onChange","file","files","fileText","setImmediate","updateData","querySelector","colorPalette","interface","interfaceOptions","min","max","pin","snaps","helpCircle","speechRate","bookmarks","voiceURI","webpackAsyncContext","__webpack_require__","o","ids","module","exports"],"mappings":"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","file":"static/js/main.b3fda0d6.chunk.js","sourcesContent":["export class Settings {\n    version: number = 1;\n    hasAppLog: boolean = true;\n    theme: number = 2;\n    uiFontSize: number = 24;\n    cardNo: string = '';\n    cardEncrypt: string = '';\n}\n","import Globals from '../../Globals';\nimport { Settings } from '../../models/Settings';\n\nfunction updateUi(newSettings: Settings) {\n  while (document.body.classList.length > 0) {\n    document.body.classList.remove(document.body.classList.item(0)!);\n  }\n  document.body.classList.toggle(`theme${newSettings.theme}`, true);\n  Globals.updateCssVars(newSettings);\n}\n\n// Used to store settings. They will be saved to file.\nexport default function reducer(state = new Settings(), action: any) {\n  var newSettings = { ...state };\n  switch (action.type) {\n    case \"LOAD_SETTINGS\":\n      newSettings = JSON.parse(localStorage.getItem(Globals.storeFile)!).settings;\n      updateUi(newSettings);\n      break;\n    case \"SET_KEY_VAL\":\n      var key = action.key;\n      var val = action.val;\n      switch (key) {\n        case 'theme': {\n          document.body.classList.forEach((val) => {\n            if (/theme/.test(val)) {\n              document.body.classList.remove(val);\n            }\n          });\n          document.body.classList.toggle(`theme${val}`, true);\n          break;\n        }\n      }\n\n      (newSettings as any)[key] = val;\n      localStorage.setItem(Globals.storeFile, JSON.stringify({ settings: newSettings }));\n      break;\n    // @ts-ignore\n    case \"DEFAULT_SETTINGS\":\n      newSettings = new Settings();\n      updateUi(newSettings);\n      break;\n    // eslint-disable-next-line\n    default:\n      if (Object.keys(newSettings).length === 0) {\n        newSettings = new Settings();\n      }\n      const defaultSettings = new Settings();\n      Object.keys(defaultSettings).forEach(key => {\n        if ((newSettings as any)[key] === undefined) {\n          (newSettings as any)[key] = (defaultSettings as any)[key];\n        }\n      });\n  }\n  return newSettings;\n}\n","import { CarrierInvChkDetailExt } from \"./CarrierInvChk\";\nimport { QryWinningList } from \"./QryWinningList\";\n\nexport class TmpSettings {\n    fetchError: boolean = false;\n    isLoadingData: boolean = false;\n    qryWinningList: QryWinningList | undefined;\n    carrierInvChkDetailsExt: CarrierInvChkDetailExt[] = [];\n    shareTextModal = { text: '', show: false };\n}\n","import { combineReducers } from \"redux\"\n\nimport settings from \"./setReducer\"\nimport tmpSettings from \"./tmpSetReducer\"\n\nexport default combineReducers({\n  settings, tmpSettings\n})\n","import { TmpSettings } from \"../../models/TmpSettings\";\n\n// Used to store temp settings in RAM. They will not be saved to file.\nexport default function reducer(state = new TmpSettings(), action: any) {\n  var newState = { ...state };\n  var key = action.key;\n  var val = action.val;\n  (newState as any)[key] = val;\n  switch (action.type) {\n    case \"TMP_SET_KEY_VAL\": {\n      return newState;\n    }\n    default:\n      break;\n  }\n  return state;\n}\n","import axios from 'axios';\nimport qs from 'qs';\nimport { CarrierInvChk, CarrierInvChkDetail } from './models/CarrierInvChk';\nimport { CarrierInvDetail } from './models/CarrierInvDetail';\nimport { QryWinningList } from './models/QryWinningList';\n\nconst eInvUrl = 'https://q6zto4yhdh.execute-api.ap-northeast-1.amazonaws.com';\n\nconst axiosInstance = axios.create({\n    baseURL: eInvUrl,\n    timeout: 10000,\n    headers: {\n        'content-type': 'application/x-www-form-urlencoded',\n    }\n});\n\nasync function qryWinningList(lookupDate: string) {\n    const date = new Date(lookupDate);\n    const month = date.getMonth() + 1;\n    const invTerm = +`${(date.getFullYear() - 1911)}${((month % 2) === 0 ? month : month + 1).toString().padStart(2, '0')}`;\n    try {\n        const res = await axiosInstance.post(`${eInvUrl}/invapp/InvApp`, qs.stringify({\n            version: 0.2,\n            action: 'QryWinningList',\n            invTerm: invTerm,\n            UUID: '593ee92f-2543-404d-9f24-88f7771cc94a',\n        }));\n        return res.data as QryWinningList;\n    } catch (error) {\n        throw (error);\n    }\n}\n\nfunction carrierInvChkDetailDate(detail: CarrierInvChkDetail) {\n    return new Date(`${detail.invDate.year + 1911}/${detail.invDate.month}/${detail.invDate.date} ${detail.invoiceTime}`);\n}\n\nfunction findMonthStartDateEndDate(date: string) {\n    const d = new Date(date);\n    const endDate = new Date(d.getFullYear(), d.getMonth() + 1, 0);\n    return {\n        startDate: `${d.getFullYear()}/${(d.getMonth() + 1).toString().padStart(2, '0')}/01`,\n        endDate: `${d.getFullYear()}/${(d.getMonth() + 1).toString().padStart(2, '0')}/${endDate.getDate().toString().padStart(2, '0')}`,\n    }\n}\n\nasync function carrierInvChk(cardNo: string, cardEncrypt: string, lookupDate: string, isLogin: boolean = false) {\n    try {\n        const endPoint = isLogin ? '/twei/login' : '/invServ/InvServ';\n        const now = Math.ceil((new Date()).valueOf() / 1000);\n        const dates = findMonthStartDateEndDate(lookupDate);\n        const res = await axiosInstance.post(`${eInvUrl}${endPoint}`, qs.stringify({\n            version: 0.5,\n            cardType: '3J0002',\n            cardNo: cardNo,\n            action: 'carrierInvChk',\n            startDate: dates.startDate,\n            endDate: dates.endDate,\n            onlyWinningInv: 'N',\n            uuid: '593ee92f-2543-404d-9f24-88f7771cc94a',\n            timeStamp: now + 95,\n            expTimeStamp: now + 95 * 3,\n            cardEncrypt: cardEncrypt,\n        }));\n        if (isLogin) {\n            throw (new Error('LOGIN SUCCESS'));\n        }\n\n        let data = res.data as CarrierInvChk;\n        \n        if (+data.code !== 200) {\n          throw (new Error(`${data.code}: ${data.msg}`));\n        }\n\n        data.details = data.details.sort((a, b) => +carrierInvChkDetailDate(a) - +carrierInvChkDetailDate(b));\n        return data;\n    } catch (error) {\n        throw (error);\n    }\n}\n\nasync function carrierInvDetail(cardNo: string, cardEncrypt: string, invNum: string, invDate: string) {\n    try {\n        const now = Math.ceil((new Date()).valueOf() / 1000);\n        const res = await axiosInstance.post(`${eInvUrl}/invServ/InvServ`, qs.stringify({\n            version: 0.5,\n            cardType: '3J0002',\n            cardNo: cardNo,\n            action: 'carrierInvDetail',\n            invNum: invNum,\n            invDate: invDate,\n            uuid: '593ee92f-2543-404d-9f24-88f7771cc94a',\n            timeStamp: now + 95,\n            expTimeStamp: now + 95 * 3,\n            cardEncrypt: cardEncrypt,\n        }));\n        const data = res.data as CarrierInvDetail;\n        return data;\n    } catch (error) {\n        throw (error);\n    }\n}\n\nconst Apis = {\n    qryWinningList,\n    carrierInvChk,\n    carrierInvDetail,\n};\n\nexport default Apis;","const sample = {\n    \"v\": \"0.5\",\n    \"code\": 200,\n    \"msg\": \"執行成功\",\n    \"onlyWinningInv\": \"N\",\n    \"details\": [\n        {\n            \"rowNum\": 1,\n            \"invNum\": \"QE12345678\",\n            \"cardType\": \"3J0002\",\n            \"cardNo\": \"/0TOIJ2R\",\n            \"sellerName\": \"公司\",\n            \"invStatus\": \"已確認\",\n            \"invDonatable\": true,\n            \"amount\": \"49\",\n            \"invPeriod\": \"11008\",\n            \"donateMark\": 0,\n            \"invDate\": {\n                \"year\": 100,\n                \"month\": 3,\n                \"date\": 1,\n                \"day\": 4,\n                \"hours\": 0,\n                \"minutes\": 0,\n                \"seconds\": 0,\n                \"time\": 1918088800000,\n                \"timezoneOffset\": -480\n            },\n            \"sellerBan\": \"12345678\",\n            \"sellerAddress\": \"台北市中山區\",\n            \"invoiceTime\": \"01:12:34\",\n            \"buyerBan\": \"\",\n            \"currency\": \"\"\n        },\n    ]\n};\nexport type CarrierInvChkDetail = typeof sample.details[0];\nexport type CarrierInvChkDetails = typeof sample.details;\nexport type CarrierInvChk = typeof sample;\n\nexport enum WinningStatus {\n    Super,\n    Special,\n    First,\n    Second,\n    Third,\n    Forth,\n    Fifth,\n    Sixth,\n    SixthEx,\n    NoAward,\n    NotYet,\n}\n\nexport interface CarrierInvChkDetailExt extends CarrierInvChkDetail {\n    winningStatus: WinningStatus;\n}\n\nexport function winningStatusToString(status: WinningStatus) {\n    switch (status) {\n        case WinningStatus.Super:\n            return '1,000萬';\n        case WinningStatus.Special:\n            return '200萬';\n        case WinningStatus.First:\n            return '20萬';\n        case WinningStatus.Second:\n            return '4萬';\n        case WinningStatus.Third:\n            return '1萬';\n        case WinningStatus.Forth:\n            return '4千';\n        case WinningStatus.Fifth:\n            return '1千';\n        case WinningStatus.Sixth:\n            return '2百';\n        case WinningStatus.SixthEx:\n            return '2百';\n        case WinningStatus.NoAward:\n            return '未中獎';\n        default:\n            return '未開獎';\n    }\n}","import React from 'react';\nimport { IonContent, IonHeader, IonPage, IonToolbar, withIonLifeCycle, IonButton, IonList, IonItem, IonLabel, IonLoading, IonToast, IonTitle, IonInfiniteScroll, IonInfiniteScrollContent, IonAlert, IonInput, IonDatetime } from '@ionic/react';\nimport { RouteComponentProps } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { Settings } from '../models/Settings';\nimport { TmpSettings } from '../models/TmpSettings';\nimport './EInvoiceListPage.css';\nimport Apis from '../Apis';\nimport { CarrierInvChkDetailExt, WinningStatus, winningStatusToString } from '../models/CarrierInvChk';\nimport Globals from '../Globals';\n\ninterface Props {\n  dispatch: Function;\n  tmpSettings: TmpSettings;\n  settings: Settings;\n}\n\ninterface PageProps extends Props, RouteComponentProps<{\n  path: string;\n  tab: string;\n}> { }\n\ninterface State {\n  dataParts: CarrierInvChkDetailExt[];\n  dateSel: string,\n  popover: any;\n  isScrollOn: boolean;\n  fetchError: boolean;\n  showToast: boolean;\n  toastMessage: string;\n  showConfrimSaveFormAlert: boolean;\n  cardNo: string;\n  cardEncrypt: string;\n}\n\nclass _EInvoiceListPage extends React.Component<PageProps, State> {\n  constructor(props: any) {\n    super(props);\n    this.state = {\n      dataParts: [],\n      dateSel: new Date().toString(),\n      popover: {\n        show: false,\n        event: null,\n      },\n      isScrollOn: false,\n      fetchError: false,\n      showConfrimSaveFormAlert: false,\n      showToast: false,\n      toastMessage: '',\n      cardNo: '',\n      cardEncrypt: '',\n    }\n  }\n\n  async ionViewWillEnter() {\n    //console.log(`${this.props.match.url} will enter`);\n\n    if (this.props.settings.cardEncrypt !== '') {\n      this.fetchDataAndShow();\n    }\n  }\n\n  /*\n  componentDidMount() {\n    //console.log(`did mount: ${this.props.match.url}`);\n  }\n  \n  componentWillUnmount() {\n    console.log(`${this.props.match.url} unmount`);\n  }\n\n  ionViewWillLeave() {\n  }\n  */\n\n  async fetchDataAndShow() {\n    this.setIsLoading(true);\n    await this.fetchData();\n    await this.showDataPageByPage(true);\n    this.setIsLoading(false);\n  }\n\n  async fetchData() {\n    const res2 = await Apis.qryWinningList(this.state.dateSel);\n    if (+res2.code === 200) {\n      this.props.dispatch({\n        type: \"TMP_SET_KEY_VAL\",\n        key: 'qryWinningList',\n        val: res2,\n      });\n    } else {\n      if (+res2.code === 901) {\n        this.props.dispatch({\n          type: \"TMP_SET_KEY_VAL\",\n          key: 'qryWinningList',\n          val: undefined,\n        });\n      } else {\n        throw (new Error(`${res2.code}: ${res2.msg}`));\n      }\n    }\n\n    try {\n      const res = await Apis.carrierInvChk(this.props.settings.cardNo, this.props.settings.cardEncrypt, this.state.dateSel);\n      let details = res.details as CarrierInvChkDetailExt[];\n      details.forEach((v, i) => {\n        details[i].winningStatus = this.calculateInvoiceWinningStatus(v.invNum);\n      })\n      this.props.dispatch({\n        type: \"TMP_SET_KEY_VAL\",\n        key: 'carrierInvChkDetailsExt',\n        val: details.sort((a, b) => a.winningStatus - b.winningStatus),\n      });\n    } catch (error) {\n      this.props.dispatch({\n        type: \"TMP_SET_KEY_VAL\",\n        key: 'carrierInvChkDetailsExt',\n        val: undefined,\n      });\n    }\n  }\n\n  setIsLoading(value: boolean) {\n    this.props.dispatch({\n      type: \"TMP_SET_KEY_VAL\",\n      key: 'isLoadingData',\n      val: value,\n    });\n  }\n\n  page = 0;\n  rows = 20;\n  async showDataPageByPage(fromStart: boolean = false) {\n    if (fromStart) {\n      this.page = 0;\n    }\n\n    //console.log(`Loading page ${this.page}`);\n\n    const data = this.props.tmpSettings.carrierInvChkDetailsExt;\n    const dataParts = data.slice(this.page * this.rows, (this.page + 1) * this.rows);\n\n    this.page += 1;\n    this.setState({\n      fetchError: false, dataParts: fromStart ? dataParts : [...this.state.dataParts, ...dataParts],\n      isScrollOn: dataParts.length === this.rows,\n    });\n\n    return true;\n  }\n\n  calculateInvoiceWinningStatus(invNum: string) {\n    invNum = invNum.substring(2);\n    const winningList = this.props.tmpSettings.qryWinningList;\n    if (winningList == null) {\n      return WinningStatus.NotYet;\n    }\n\n    const firstPrizeNos = [\n      winningList.firstPrizeNo1, winningList.firstPrizeNo2, winningList.firstPrizeNo3,\n      winningList.firstPrizeNo4, winningList.firstPrizeNo5, winningList.firstPrizeNo6,\n      winningList.firstPrizeNo7, winningList.firstPrizeNo8, winningList.firstPrizeNo9,\n      winningList.firstPrizeNo10,\n    ];\n    const sixthPrizeNos = [\n      winningList.sixthPrizeNo1, winningList.sixthPrizeNo2, winningList.sixthPrizeNo3,\n      winningList.sixthPrizeNo4, winningList.sixthPrizeNo5, winningList.sixthPrizeNo6,\n    ];\n    if (invNum === winningList.superPrizeNo) {\n      return WinningStatus.Super;\n    } else if ([winningList.spcPrizeNo, winningList.spcPrizeNo2, winningList.spcPrizeNo3].some(no => invNum === no)) {\n      return WinningStatus.Special;\n    } else if (firstPrizeNos.some(no => invNum === no)) {\n      return WinningStatus.First;\n    } else if (firstPrizeNos.some(no => invNum.substring(1) === no.substring(1))) {\n      return WinningStatus.Second;\n    } else if (firstPrizeNos.some(no => invNum.substring(2) === no.substring(2))) {\n      return WinningStatus.Third;\n    } else if (firstPrizeNos.some(no => invNum.substring(3) === no.substring(3))) {\n      return WinningStatus.Forth;\n    } else if (firstPrizeNos.some(no => invNum.substring(4) === no.substring(4))) {\n      return WinningStatus.Fifth;\n    } else if (firstPrizeNos.some(no => invNum.substring(5) === no.substring(5))) {\n      return WinningStatus.Sixth;\n    } else if (sixthPrizeNos.some(no => invNum.substring(5) === no)) {\n      return WinningStatus.SixthEx;\n    } else {\n      return WinningStatus.NoAward;\n    }\n  }\n\n  getRows() {\n    let rows = Array<object>();\n    this.state.dataParts.forEach((item: CarrierInvChkDetailExt, index: number) => {\n      const row = <IonItem button={true} key={`item` + item.invNum}\n        onClick={async event => {\n          const invDate = `${item.invDate.year + 1911}-${item.invDate.month.toString().padStart(2, '0')}-${item.invDate.date.toString().padStart(2, '0')}`;\n          this.props.history.push(`${Globals.pwaUrl}/eInvoice/${item.invNum}/${invDate}`);\n        }}>\n        <div tabIndex={0}></div>{/* Workaround for macOS Safari 14 bug. */}\n        <div className='winningStatus'>\n          <IonLabel className='ion-text-wrap uiFont' key={`winLabel_` + index}>\n            {winningStatusToString(item.winningStatus)}\n          </IonLabel>\n        </div>\n        <div className='listItem'>\n          <div>\n            <IonLabel className='ion-text-wrap uiFont' key={`invDataLabel_` + index}>\n              {item.invDate.month.toString().padStart(2, '0')}/{item.invDate.date.toString().padStart(2, '0')} &nbsp;\n              {item.invNum} &nbsp;\n              {item.amount}元\n            </IonLabel>\n          </div>\n          <div>\n            <IonLabel className='ion-text-wrap uiFont' key={`sellerLabel_` + index}>\n              {item.sellerName}\n            </IonLabel>\n          </div>\n        </div>\n      </IonItem>;\n      rows.push(row);\n    });\n    return rows;\n  }\n\n  render() {\n    return (\n      <IonPage>\n        <IonHeader>\n          <IonToolbar>\n            <IonTitle className='uiFont'>發票</IonTitle>\n            <IonDatetime slot='end' className='uiFont'\n              displayFormat='YYYY年MM月'\n              display-timezone='Asia/Taipei'\n              doneText='確定'\n              cancelText='取消'\n              value={this.state.dateSel}\n              onIonChange={async e => {\n                this.setState({ dateSel: e.detail.value || '' });\n                await this.fetchDataAndShow();\n              }} >\n            </IonDatetime>\n          </IonToolbar>\n        </IonHeader>\n        <IonContent style={{ textAlign: 'center' }}>\n          {\n            this.props.tmpSettings.isLoadingData ?\n              <IonLoading\n                cssClass='uiFont'\n                isOpen={this.props.tmpSettings.isLoadingData}\n                message={'載入中...'}\n              />\n              :\n              this.props.settings.cardEncrypt === '' ?\n                <>\n                  <div className='LoginBlock'>\n                    <IonLabel className='uiFont'>手機條碼</IonLabel>\n                    <IonInput className='uiFont IonInput' value={this.state.cardNo} placeholder='/ABC+123' onIonChange={(e) => {\n                      this.setState({ cardNo: e.detail.value || '' });\n                    }}></IonInput>\n                  </div>\n\n                  <div className='LoginBlock'>\n                    <IonLabel className='uiFont'>驗證碼</IonLabel>\n                    <IonInput className='uiFont IonInput' type='password' value={this.state.cardEncrypt} onIonChange={(e) => {\n                      this.setState({ cardEncrypt: e.detail.value || '' });\n                    }}></IonInput>\n\n                    <IonButton fill='outline' shape='round' size='large' className='uiFont' onClick={e => {\n                      this.setState({ showConfrimSaveFormAlert: true });\n                    }}>登入</IonButton>\n                  </div>\n                </>\n                :\n                <>\n                  <IonList>\n                    {this.getRows()}\n                    <IonInfiniteScroll threshold=\"100px\"\n                      disabled={!this.state.isScrollOn}\n                      onIonInfinite={(ev: CustomEvent<void>) => {\n                        this.showDataPageByPage();\n                        (ev.target as HTMLIonInfiniteScrollElement).complete();\n                      }} >\n                      <IonInfiniteScrollContent\n                        loadingText=\"載入中...\">\n                      </IonInfiniteScrollContent>\n                    </IonInfiniteScroll>\n                  </IonList>\n                  <IonLabel>中獎資訊僅供參考。若有錯誤恕不負責。</IonLabel>\n                </>\n          }\n\n          <IonAlert\n            cssClass='uiFont'\n            isOpen={this.state.showConfrimSaveFormAlert}\n            backdropDismiss={false}\n            header={'警告！請勿在公用電腦登入此 app，因為登入後驗證碼將以明碼存至此裝置，會有外洩的問題。請在個人裝置使用此 app 或至設定頁登出。'}\n            buttons={[\n              {\n                text: '取消',\n                cssClass: 'secondary uiFont',\n                handler: (value) => {\n                  this.setState({\n                    showConfrimSaveFormAlert: false,\n                  });\n                },\n              },\n\n              {\n                text: '登入',\n                cssClass: 'primary uiFont',\n                handler: async (value) => {\n                  this.setState({\n                    showConfrimSaveFormAlert: false,\n                  });\n\n                  this.props.dispatch({\n                    type: \"SET_KEY_VAL\",\n                    key: 'cardNo',\n                    val: this.state.cardNo,\n                  });\n\n                  this.props.dispatch({\n                    type: \"SET_KEY_VAL\",\n                    key: 'cardEncrypt',\n                    val: this.state.cardEncrypt,\n                  });\n\n                  try {\n                    this.setIsLoading(true);\n                    await Apis.carrierInvChk(this.props.settings.cardNo, this.props.settings.cardEncrypt, this.state.dateSel, true);\n                  } catch (error: any) {\n                    this.setIsLoading(false);\n                    if (error.message === 'LOGIN SUCCESS') {\n                      this.setState({ toastMessage: '登入成功！', showToast: true });\n                      await this.fetchDataAndShow();\n                    } else {\n                      Globals.logout(this.props.dispatch);\n                      this.setState({ toastMessage: '登入失敗，請檢察手機條碼與驗證碼！', showToast: true });\n                    }\n                  }\n                },\n              },\n            ]}\n          />\n\n          <IonToast\n            cssClass='uiFont'\n            isOpen={this.state.showToast}\n            onDidDismiss={() => this.setState({ showToast: false })}\n            message={this.state.toastMessage}\n            duration={2000}\n          />\n        </IonContent>\n      </IonPage>\n    );\n  }\n};\n\nconst EInvoiceListPage = withIonLifeCycle(_EInvoiceListPage);\n\nconst mapStateToProps = (state: any /*, ownProps*/) => {\n  return {\n    tmpSettings: state.tmpSettings,\n    settings: state.settings,\n  }\n};\n\n// const mapDispatchToProps = {};\n\nexport default connect(\n  mapStateToProps,\n)(EInvoiceListPage);\n","import React from 'react';\nimport { IonButton, IonContent, IonItem, IonLabel, IonList, IonModal, IonToggle } from '@ionic/react';\nimport { RouteComponentProps } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport Globals from '../Globals';\nimport * as qrcode from 'qrcode';\n\ninterface Props {\n  showModal: boolean;\n  text: string;\n  finish: Function;\n  settings: any;\n}\n\ninterface PageProps extends Props, RouteComponentProps<{\n  tab: string;\n  path: string;\n}> { }\n\ninterface State {\n  isAppSettingsExport: Array<boolean>;\n}\n\nclass _ShareTextModal extends React.Component<PageProps, State> {\n\n  constructor(props: any) {\n    super(props);\n    this.state = {\n      isAppSettingsExport: Array<boolean>(Object.keys(Globals.appSettings).length)\n    }\n  }\n\n  updateQrCode() {\n    const appSettingsExport = Object.keys(Globals.appSettings).filter((key, i) => this.state.isAppSettingsExport[i]).map((key, i) => {return {key: key, val: this.props.settings[key]};});\n    let appSettingsString: string | null = appSettingsExport.map(keyVal => `${keyVal.key}=${+keyVal.val}`).join(',');\n    appSettingsString = appSettingsString !== '' ? `settings=${appSettingsString}` : null;\n    let appUrl = this.props.text;\n    const hasQueryString = /\\?/.test(appUrl);\n    if (appSettingsString) {\n      appUrl += hasQueryString ? `&${appSettingsString}` : `?${appSettingsString}`;\n    }\n    \n    Globals.copyToClipboard(appUrl);\n    const qrcCanvas = document.getElementById('qrcCanvas');\n    qrcode.toCanvas(qrcCanvas, appUrl);\n    return qrcCanvas;\n  }\n\n  render() {\n    return (\n      <IonModal\n        isOpen={this.props.showModal}\n        cssClass='uiFont'\n        swipeToClose={true}\n        //presentingElement={router || undefined}\n        onWillPresent={() => {\n          let isAppSettingsExport: Array<boolean> = [];\n          for (let i = 0; i < this.state.isAppSettingsExport.length; i++) {\n            isAppSettingsExport.push(false);\n          }\n          this.setState({isAppSettingsExport: isAppSettingsExport});\n          this.updateQrCode();\n        }}\n        onDidDismiss={() => this.props.finish()}>\n        <IonContent>\n          <div style={{ display: 'flex', flexDirection: 'column', height: '100%', alignItems: 'center' }}>\n            <div>\n              <IonLabel className='uiFont'>此頁app連結已複製至剪貼簿！</IonLabel>\n            </div>\n            <div>\n              <IonLabel className='uiFont'>也可以使用QR Code分享:</IonLabel>\n            </div>\n            <div style={{ flexGrow: 1, flexShrink: 0, display: 'flex', alignItems: 'center', margin: 10 }}>\n              <canvas id='qrcCanvas' width='500' height='500' style={{ margin: '0px auto' }} />\n            </div>\n            <div>\n              <IonLabel className='uiFont'>包括app設定:</IonLabel>\n              <IonList>\n                {\n                  Object.keys(Globals.appSettings).map((key, i) =>\n                    <IonItem key={`appSettingExportItem_${i}`}>\n                      <IonLabel className='ion-text-wrap uiFont'>{Globals.appSettings[key]}</IonLabel>\n                      <IonToggle slot='end' onIonChange={e => {\n                        const isAppSettingsExport =  this.state.isAppSettingsExport;\n                        isAppSettingsExport[i] = e.detail.checked;\n                        this.setState({isAppSettingsExport: isAppSettingsExport});\n                        this.updateQrCode();\n                      }} />\n                    </IonItem>\n                  )\n                }\n              </IonList>\n            </div>\n            <div>\n              <IonButton fill='outline' shape='round' size='large' onClick={() => this.props.finish()}>關閉</IonButton>\n            </div>\n          </div>\n        </IonContent>\n      </IonModal>\n    );\n  }\n};\n\nconst mapStateToProps = (state: any /*, ownProps*/) => {\n  return {\n    settings: state.settings,\n  }\n};\n\n//const mapDispatchToProps = {};\n\nexport default connect(\n  mapStateToProps,\n)(_ShareTextModal);\n","import React from 'react';\nimport { IonContent, IonHeader, IonPage, IonTitle, IonToolbar, withIonLifeCycle, IonButton, IonList, IonItem, IonIcon, IonToast, IonLoading, IonLabel, IonListHeader } from '@ionic/react';\nimport { RouteComponentProps } from 'react-router-dom';\nimport { connect } from 'react-redux';\n\nimport { Settings } from '../models/Settings';\nimport { TmpSettings } from '../models/TmpSettings';\n\nimport { arrowBack } from 'ionicons/icons';\nimport { CarrierInvDetail } from '../models/CarrierInvDetail';\nimport Apis from '../Apis';\n\ninterface Props {\n  dispatch: Function;\n  settings: Settings;\n  tmpSettings: TmpSettings;\n}\n\ninterface State {\n  carrierInvDetail: CarrierInvDetail | undefined;\n  showToast: boolean;\n  toastMessage: string;\n}\n\ninterface PageProps extends Props, RouteComponentProps<{\n  tab: string;\n  invNum: string;\n  invDate: string;\n}> { }\n\nclass _DetailPage extends React.Component<PageProps, State> {\n  constructor(props: PageProps) {\n    super(props);\n    this.state = {\n      carrierInvDetail: undefined,\n      showToast: false,\n      toastMessage: '',\n    };\n\n    this.fetchData();\n  }\n\n  async ionViewWillEnter() {\n  }\n\n  async fetchData() {\n    this.setIsLoading(true);\n    const carrierInvDetail = await Apis.carrierInvDetail(\n      this.props.settings.cardNo,\n      this.props.settings.cardEncrypt,\n      this.props.match.params.invNum,\n      this.props.match.params.invDate.replaceAll('-', '/'),\n    );\n    this.setState({ carrierInvDetail: carrierInvDetail });\n    this.setIsLoading(false);\n  }\n\n  setIsLoading(value: boolean) {\n    this.props.dispatch({\n      type: \"TMP_SET_KEY_VAL\",\n      key: 'isLoadingData',\n      val: value,\n    });\n  }\n\n  render() {\n    const cid = this.state.carrierInvDetail;\n    return (\n      this.props.tmpSettings.isLoadingData ?\n        <IonLoading\n          cssClass='uiFont'\n          isOpen={this.props.tmpSettings.isLoadingData}\n          message={'載入中...'}\n        />\n        :\n        <IonPage>\n          <IonHeader>\n            <IonToolbar>\n              <IonButton fill=\"clear\" slot='start' onClick={e => this.props.history.goBack()}>\n                <IonIcon icon={arrowBack} slot='icon-only' />\n              </IonButton>\n\n              <IonTitle className='uiFont'>發票明細</IonTitle>\n\n            </IonToolbar>\n          </IonHeader>\n          <IonContent style={{ textAlign: 'center' }}>\n\n            <div className='ion-text-wrap uiFontX1_5' style={{ textAlign: 'left' }}>{cid?.sellerName}</div>\n\n            <div>\n              <IonLabel className='ion-text-wrap uiFontX1_5' style={{ color: 'red' }}>{cid?.invNum}</IonLabel>\n            </div>\n\n            <IonItem>\n              <IonLabel className='ion-text-wrap uiFontX0_7'>{cid?.invDate}&nbsp;{cid?.invoiceTime}</IonLabel>\n              <IonLabel className='ion-text-wrap uiFontX0_7' style={{ textAlign: 'right' }}>{this.props.settings.cardNo}</IonLabel>\n            </IonItem>\n\n            {\n              <IonList>\n                <IonListHeader lines='full' color='primary'>\n                  <IonLabel className='uiFont'>交易明細</IonLabel>\n                </IonListHeader>\n\n                <IonItem>\n                  <IonLabel className='ion-text-wrap uiFont'>營業人統編：{cid?.sellerBan}</IonLabel>\n                </IonItem>\n                <IonItem>\n                  <IonLabel className='ion-text-wrap uiFont'>門市地址：{cid?.sellerAddress}</IonLabel>\n                </IonItem>\n                <IonItem>\n                  <IonLabel slot='start' className='ion-text-wrap uiFont' style={{ fontWeight: 'bold' }}>品名(數量)</IonLabel>\n                  <IonLabel slot='end' className='ion-text-wrap uiFont' style={{ textAlign: 'right', fontWeight: 'bold' }}>小計</IonLabel>\n                </IonItem>\n                {\n                  cid?.details.map((v, i) =>\n                    <IonItem key={`item${i}`}>\n                      <IonLabel slot='start' className='ion-text-wrap uiFont'>{v.description}({v.quantity})</IonLabel>\n                      <IonLabel slot='end' className='ion-text-wrap uiFont' style={{ textAlign: 'right' }}>{v.amount}</IonLabel>\n                    </IonItem>\n                  )\n                }\n                <IonItem>\n                  <IonLabel slot='end' className='ion-text-wrap uiFont' style={{ textAlign: 'right' }}>\n                    合計：{cid?.amount}元\n                  </IonLabel>\n                </IonItem>\n              </IonList>\n            }\n\n            <IonToast\n              cssClass='uiFont'\n              isOpen={this.state.showToast}\n              onDidDismiss={() => this.setState({ showToast: false })}\n              message={this.state.toastMessage}\n              duration={2000}\n            />\n          </IonContent>\n        </IonPage>\n    );\n  }\n}\n\nconst mapStateToProps = (state: any /*, ownProps*/) => {\n  return {\n    tmpSettings: state.tmpSettings,\n    settings: state.settings\n  }\n};\n\n//const mapDispatchToProps = {};\n\nconst DetailPage = withIonLifeCycle(_DetailPage);\n\nexport default connect(\n  mapStateToProps,\n)(DetailPage);\n","import React from 'react';\nimport { IonContent, IonHeader, IonPage, IonTitle, IonToolbar, withIonLifeCycle, IonButton, IonIcon, IonToast, IonLoading, IonLabel, IonDatetime } from '@ionic/react';\nimport { RouteComponentProps } from 'react-router-dom';\nimport { connect } from 'react-redux';\n\nimport { Settings } from '../models/Settings';\nimport { TmpSettings } from '../models/TmpSettings';\n\nimport { arrowBack } from 'ionicons/icons';\nimport Apis from '../Apis';\nimport './WinningListPage.css';\n\ninterface Props {\n  dispatch: Function;\n  settings: Settings;\n  tmpSettings: TmpSettings;\n}\n\ninterface State {\n  dateSel: string;\n  showToast: boolean;\n  toastMessage: string;\n}\n\ninterface PageProps extends Props, RouteComponentProps<{\n  tab: string;\n}> { }\n\nclass _WinningListPage extends React.Component<PageProps, State> {\n  maxDate: Date;\n  constructor(props: PageProps) {\n    super(props);\n\n    const currentDate = new Date();\n    const year = currentDate.getFullYear();\n    const month = currentDate.getMonth() + 1;\n    this.maxDate = new Date(\n      year,\n      (month % 2) === 0 ? month - 3 : month - 2,\n      1);\n\n    this.state = {\n      dateSel: this.maxDate.toString(),\n      showToast: false,\n      toastMessage: '',\n    };\n  }\n\n  ionViewWillEnter() {\n    this.fetchData();\n  }\n\n  async fetchData() {\n    this.setIsLoading(true);\n    const res2 = await Apis.qryWinningList(this.state.dateSel);\n    if (+res2.code === 200) {\n      this.props.dispatch({\n        type: \"TMP_SET_KEY_VAL\",\n        key: 'qryWinningList',\n        val: res2,\n      });\n    } else {\n      if (+res2.code === 901) {\n        this.props.dispatch({\n          type: \"TMP_SET_KEY_VAL\",\n          key: 'qryWinningList',\n          val: undefined,\n        });\n      } else {\n        throw (new Error(`${res2.code}: ${res2.msg}`));\n      }\n    }\n    this.setIsLoading(false);\n  }\n\n  setIsLoading(value: boolean) {\n    this.props.dispatch({\n      type: \"TMP_SET_KEY_VAL\",\n      key: 'isLoadingData',\n      val: value,\n    });\n  }\n\n  render() {\n    const qwl = this.props.tmpSettings.qryWinningList!;\n    return (\n      <IonPage>\n        <IonHeader>\n          <IonToolbar>\n            <IonButton fill=\"clear\" slot='start' onClick={e => this.props.history.goBack()}>\n              <IonIcon icon={arrowBack} slot='icon-only' />\n            </IonButton>\n\n            <IonTitle className='uiFont'>開獎號碼</IonTitle>\n\n            <IonDatetime slot='end' className='uiFont'\n              displayFormat='YYYY年MMM月'\n              monthValues='1, 3, 5, 7, 9, 11'\n              monthShortNames='01-02, 01-02, 03-04, 03-04, 05-06, 05-06, 07-08, 07-08, 09-10, 09-10, 11-12, 11-12'\n              display-timezone='Asia/Taipei'\n              doneText='確定'\n              cancelText='取消'\n              value={this.state.dateSel}\n              onIonChange={async e => {\n                this.setState({ dateSel: e.detail.value || '' });\n                await this.fetchData();\n              }}>\n            </IonDatetime>\n          </IonToolbar>\n        </IonHeader>\n        <IonContent style={{ textAlign: 'center' }}>\n\n          {\n            this.props.tmpSettings.isLoadingData || qwl == null ?\n              <IonLoading\n                cssClass='uiFont'\n                isOpen={this.props.tmpSettings.isLoadingData}\n                message={'載入中...'}\n              />\n              :\n              <div className='table'>\n                <div className='row'>\n                  <IonLabel className='cell1'>特別獎</IonLabel>\n                  <div className='cell2'>\n                    <span className='uiFontX1_5 cellSpan'>{qwl.superPrizeNo}</span>\n                    <span className='uiFontX0_7'>8位數號碼與上列號碼相同者獎金1,000萬元</span>\n                  </div>\n                </div>\n\n                <div className='row'>\n                  <div className='cell1'>特獎</div>\n                  <div className='cell2'>\n                    {\n                      [qwl.spcPrizeNo, qwl.spcPrizeNo2, qwl.spcPrizeNo3].filter(v => v !== '').map(v =>\n                        <span className='uiFontX1_5 cellSpan'>{v}</span>\n                      )\n                    }\n                    <span className='uiFontX0_7'>8位數號碼與上列號碼相同者獎金200萬元</span>\n                  </div>\n                </div>\n\n                <div className='row'>\n                  <div className='cell1'>頭獎</div>\n                  <div className='cell2'>\n                    {\n                      [\n                        qwl.firstPrizeNo1, qwl.firstPrizeNo2, qwl.firstPrizeNo3,\n                        qwl.firstPrizeNo4, qwl.firstPrizeNo5, qwl.firstPrizeNo6,\n                        qwl.firstPrizeNo7, qwl.firstPrizeNo8, qwl.firstPrizeNo9,\n                        qwl.firstPrizeNo10,\n                      ].filter(v => v !== '').sort((a, b) => +a - +b).map(v =>\n                        <span className='uiFontX1_5 cellSpan'>{v}</span>\n                      )\n                    }\n                    <span className='uiFontX0_7'>8位數號碼與上列號碼相同者獎金20萬元</span>\n                  </div>\n                </div>\n\n                <div className='row'>\n                  <div className='cell1'>二獎</div>\n                  <div className='cell2'>\n                    <span className='uiFontX0_7'>末7碼與頭獎相同者各得獎金4萬元</span>\n                  </div>\n                </div>\n\n                <div className='row'>\n                  <div className='cell1'>三獎</div>\n                  <div className='cell2'>\n                    <span className='uiFontX0_7'>末6碼與頭獎相同者各得獎金1萬元</span>\n                  </div>\n                </div>\n\n                <div className='row'>\n                  <div className='cell1'>四獎</div>\n                  <div className='cell2'>\n                    <span className='uiFontX0_7'>末5碼與頭獎相同者各得獎金4千元</span>\n                  </div>\n                </div>\n\n                <div className='row'>\n                  <div className='cell1'>五獎</div>\n                  <div className='cell2'>\n                    <span className='uiFontX0_7'>末4碼與頭獎相同者各得獎金1千元</span>\n                  </div>\n                </div>\n\n                <div className='row'>\n                  <div className='cell1'>六獎</div>\n                  <div className='cell2'>\n                    <span className='uiFontX0_7'>末3碼與頭獎相同者各得獎金2百元</span>\n                  </div>\n                </div>\n\n                <div className='row'>\n                  <div className='cell1'>增開六獎</div>\n                  <div className='cell2'>\n                    {\n                      [\n                        qwl.sixthPrizeNo1, qwl.sixthPrizeNo2, qwl.sixthPrizeNo3,\n                        qwl.sixthPrizeNo4, qwl.sixthPrizeNo5, qwl.sixthPrizeNo6,\n                      ].filter(v => v !== '').map(v =>\n                        <span className='uiFontX1_5 cellSpan'>{v}</span>\n                      )\n                    }\n                    <span className='uiFontX0_7'>末3碼與增開六獎相同者各得獎金2百元</span>\n                  </div>\n                </div>\n\n              </div>\n          }\n\n          <IonToast\n            cssClass='uiFont'\n            isOpen={this.state.showToast}\n            onDidDismiss={() => this.setState({ showToast: false })}\n            message={this.state.toastMessage}\n            duration={2000}\n          />\n        </IonContent>\n      </IonPage>\n    );\n  }\n}\n\nconst mapStateToProps = (state: any /*, ownProps*/) => {\n  return {\n    tmpSettings: state.tmpSettings,\n    settings: state.settings\n  }\n};\n\n//const mapDispatchToProps = {};\n\nconst WinningListPage = withIonLifeCycle(_WinningListPage);\n\nexport default connect(\n  mapStateToProps,\n)(WinningListPage);\n","import React from 'react';\nimport { Redirect, Route, RouteComponentProps, withRouter } from 'react-router-dom';\nimport {\n  setupConfig,\n  IonApp,\n  IonIcon,\n  IonRouterOutlet,\n  IonTabBar,\n  IonTabButton,\n  IonTabs,\n  IonAlert,\n  IonToast,\n} from '@ionic/react';\nimport { IonReactRouter } from '@ionic/react-router';\nimport { connect, Provider } from 'react-redux';\nimport queryString from 'query-string';\nimport getSavedStore from './redux/store';\nimport { settings, receipt, trophy } from 'ionicons/icons';\n\n/* Core CSS required for Ionic components to work properly */\nimport '@ionic/react/css/core.css';\n\n/* Basic CSS for apps built with Ionic */\nimport '@ionic/react/css/normalize.css';\nimport '@ionic/react/css/structure.css';\nimport '@ionic/react/css/typography.css';\n\n/* Optional CSS utils that can be commented out */\nimport '@ionic/react/css/padding.css';\nimport '@ionic/react/css/float-elements.css';\nimport '@ionic/react/css/text-alignment.css';\nimport '@ionic/react/css/text-transformation.css';\nimport '@ionic/react/css/flex-utils.css';\nimport '@ionic/react/css/display.css';\n\n/* Theme variables */\nimport './theme/variables.css';\nimport SettingsPage from './pages/SettingsPage';\nimport Globals from './Globals';\nimport EInvoiceListPage from './pages/EInvoiceListPage';\nimport ShareTextModal from './components/ShareTextModal';\nimport { Settings } from './models/Settings';\nimport { TmpSettings } from './models/TmpSettings';\nimport DetailPage from './pages/DetailPage';\nimport WinningListPage from './pages/WinningListPage';\n\nconst electronBackendApi: any = (window as any).electronBackendApi;\n\nlet store = getSavedStore();\n/*\nclass DebugRouter extends IonReactRouter {\n  constructor(props: any) {\n    super(props);\n    console.log('initial history is: ', JSON.stringify(this.history, null, 2))\n    this.history.listen((location, action) => {\n      console.log(\n        `The current URL is ${location.pathname}${location.search}${location.hash}`\n      )\n      console.log(`The last navigation action was ${action}`, JSON.stringify(this.history, null, 2));\n    });\n  }\n}\n*/\n\nsetupConfig({\n  mode: 'md', // Use a consistent UI style across Android and iOS.\n  swipeBackEnabled: false,\n});\n\nexport var serviceWorkCallbacks = {\n  onSuccess: function (registration: ServiceWorkerRegistration) { },\n  onUpdate: function (registration: ServiceWorkerRegistration) { },\n};\n\ninterface Props {\n  dispatch: Function;\n  shareTextModal: any;\n  settings: Settings;\n  tmpSettings: TmpSettings;\n}\n\ninterface PageProps extends RouteComponentProps<{\n  tab: string;\n  path: string;\n}> { }\n\ninterface AppOrigProps extends Props, RouteComponentProps<{\n  tab: string;\n  path: string;\n}> { }\n\ninterface State {\n  showToast: boolean;\n  toastMessage: string;\n  showUpdateAlert: boolean;\n  showRestoreAppSettingsToast: boolean;\n}\n\nclass _App extends React.Component<PageProps> {\n  render() {\n    return (\n      <Provider store={store}>\n        <AppOrig {...this.props} />\n      </Provider>\n    );\n  }\n}\n\nclass _AppOrig extends React.Component<AppOrigProps, State> {\n  registrationNew: ServiceWorkerRegistration | null;\n  originalAppSettingsStr: string | null | undefined;\n\n  constructor(props: any) {\n    super(props);\n    if (!this.props.settings.hasAppLog) {\n      Globals.disableAppLog();\n    }\n\n    electronBackendApi?.receive(\"fromMain\", (data: any) => {\n      switch (data.event) {\n        case 'version':\n          store.dispatch({\n            type: \"TMP_SET_KEY_VAL\",\n            key: 'mainVersion',\n            val: data.version,\n          });\n          break;\n      }\n    });\n    electronBackendApi?.send(\"toMain\", { event: 'ready' });\n\n    this.registrationNew = null;\n\n    // ----- Initializing UI settings -----\n    // Apply the theme setting.\n    while (document.body.classList.length > 0) {\n      document.body.classList.remove(document.body.classList.item(0)!);\n    }\n    document.body.classList.toggle(`theme${this.props.settings.theme}`, true);\n\n    // Modify UI settings from query string.\n    const queryParams = queryString.parse(this.props.location.search) as any;\n    if (queryParams.settings) {\n      this.originalAppSettingsStr = localStorage.getItem(Globals.storeFile);\n      (queryParams.settings as string).split(',').forEach(setting => {\n        const keyVal = setting.split('=');\n        this.props.dispatch({\n          type: \"SET_KEY_VAL\",\n          key: keyVal[0],\n          val: +keyVal[1],\n        });\n      });\n    }\n    Globals.updateCssVars(this.props.settings);\n\n    this.state = {\n      showUpdateAlert: false,\n      showRestoreAppSettingsToast: (queryParams.settings != null && this.originalAppSettingsStr != null) || false,\n      showToast: false,\n      toastMessage: '',\n    };\n\n    serviceWorkCallbacks.onUpdate = (registration: ServiceWorkerRegistration) => {\n      this.registrationNew = registration;\n      this.setState({ showUpdateAlert: true });\n    };\n\n    serviceWorkCallbacks.onSuccess = (registration: ServiceWorkerRegistration) => {\n    };\n\n    // Preload speechSynthesis.\n    if (typeof speechSynthesis !== 'undefined') {\n      speechSynthesis.getVoices();\n      speechSynthesis.cancel();\n    }\n\n    // Enable screen wake lock.\n    if ((navigator as any).wakeLock) {\n      this.wakeLockScreen();\n      document.addEventListener(\"visibilitychange\", async () => {\n        if (document.visibilityState === 'visible') {\n          this.wakeLockScreen();\n        } else {\n          this.wakeLockScreenRelease()\n        }\n      });\n    }\n\n    const dbOpenReq = indexedDB.open(Globals.tweiDb);\n    // Init store in indexedDB if necessary.\n    dbOpenReq.onupgradeneeded = function (event: IDBVersionChangeEvent) {\n      var db = (event.target as any).result;\n      db.createObjectStore('store');\n      console.log(`DB store created.`);\n    };\n  }\n\n  restoreAppSettings() {\n    localStorage.setItem(Globals.storeFile, this.originalAppSettingsStr!);\n    this.props.dispatch({ type: 'LOAD_SETTINGS' });\n  }\n\n  // Prevent device from sleeping.\n  wakeLock: any;\n  async wakeLockScreen() {\n    try {\n      const wakeLock = (navigator as any).wakeLock;\n      if (wakeLock != null) {\n        this.wakeLock = await wakeLock.request('screen');\n        console.log('Screen wake lock is requested.');\n      } else {\n        console.error('navigator.wakeLock is undefined.');\n      }\n    } catch (err: any) {\n      // the wake lock request fails - usually system related, such low as battery\n      console.log(`${err.name}, ${err.message}`);\n      console.log(new Error().stack);\n    }\n  }\n\n  async wakeLockScreenRelease() {\n    if (this.wakeLock != null) {\n      await this.wakeLock.release();\n      this.wakeLock = null;\n      console.log('Screen wake lock is released.');\n    }\n  }\n\n  routeByQueryString() {\n    // This app uses client side routing. \n    // Without the first loading of this app,\n    // any client side route becomes a server side route!\n    // These invalid server side routings cause 404 errors.\n    // To workaround these errors, we can use GitHub 404.html redirection\n    // to pass the client side routes to this app by using query string.\n    // After this app loads, it can use the query string to correctly redirect to\n    // a client side route!\n    console.log(window.location.search);\n    const routeMatches = /route=([^&]*)/.exec(window.location.search);\n    const queryMatches = /query=([^&]*)/.exec(window.location.search);\n    if (routeMatches !== null) {\n      const route = decodeURIComponent(routeMatches[1]);\n\n      let query = ''\n      if (queryMatches !== null) {\n        query = decodeURIComponent(queryMatches[1]);\n      }\n      return <Redirect to={`${Globals.pwaUrl}` + route + query} />;\n    } else if (window.location.pathname === `${Globals.pwaUrl}/` || window.location.pathname === `${Globals.pwaUrl}`) {\n      return <Redirect to={`${Globals.pwaUrl}/eInvoice`} />;\n    }\n  }\n\n  render() {\n    return (\n      <IonApp>\n        <IonReactRouter>\n          <IonTabs>\n            <IonRouterOutlet animated={false}>\n              {/* The following route is for backward compatibility. */}\n              <Route path={`${Globals.pwaUrl}/:tab(eInvoice)`} render={(props: any) => <EInvoiceListPage {...props} />} exact={true} />\n              <Route path={`${Globals.pwaUrl}/:tab(eInvoice)/:invNum/:invDate`} render={(props: any) => <DetailPage {...props} />} exact={true} />\n              <Route path={`${Globals.pwaUrl}/:tab(WinningList)`} render={(props: any) => <WinningListPage {...props} />} exact={true} />\n              <Route path={`${Globals.pwaUrl}/settings`} render={(props: any) => <SettingsPage {...props} />} />\n              <Route path={`${Globals.pwaUrl}/`} render={() => { return this.routeByQueryString(); }} exact={true} />\n            </IonRouterOutlet>\n            <IonTabBar slot=\"bottom\">\n              <IonTabButton tab=\"eInvoice\" href={`${Globals.pwaUrl}/eInvoice`}>\n                <IonIcon icon={receipt} />\n              </IonTabButton>\n              <IonTabButton tab=\"WinningList\" href={`${Globals.pwaUrl}/WinningList`}>\n                <IonIcon icon={trophy} />\n              </IonTabButton>\n              <IonTabButton tab=\"settings\" href={`${Globals.pwaUrl}/settings`}>\n                <IonIcon icon={settings} />\n              </IonTabButton>\n            </IonTabBar>\n          </IonTabs>\n        </IonReactRouter>\n        <IonAlert\n          cssClass='uiFont'\n          isOpen={this.state.showUpdateAlert}\n          backdropDismiss={false}\n          onDidPresent={(ev) => {\n            // Run SKIP_WAITING at onDidPresent event to avoid a race condition of\n            // an old page fetching old JS chunks with a new service worker!\n            this.registrationNew?.installing?.postMessage({ type: 'SKIP_WAITING' });\n            this.registrationNew?.waiting?.postMessage({ type: 'SKIP_WAITING' });\n          }}\n          header={'App 已更新，請重啟!'}\n          buttons={[\n            {\n              text: '關閉',\n              cssClass: 'primary uiFont',\n              handler: (value) => {\n                this.setState({\n                  showUpdateAlert: false,\n                });\n              },\n            }\n          ]}\n        />\n\n        <ShareTextModal\n          {...{\n            text: this.props.shareTextModal?.text,\n            showModal: this.props.shareTextModal?.show || false,\n            finish: () => {\n              store.dispatch({\n                type: \"TMP_SET_KEY_VAL\",\n                key: 'shareTextModal',\n                val: { show: false },\n              });\n            }, ...this.props\n          }}\n        />\n\n        <IonToast\n          cssClass='uiFont'\n          isOpen={this.state.showRestoreAppSettingsToast}\n          onDidDismiss={() => this.setState({ showRestoreAppSettingsToast: false })}\n          message={`已套用app連結中的設定，是否還原設定？`}\n          buttons={[\n            {\n              text: '取消',\n              role: 'cancel',\n              handler: () => this.setState({ showRestoreAppSettingsToast: false })\n            },\n            {\n              text: '還原',\n              handler: () => this.restoreAppSettings(),\n            },\n          ]}\n        />\n\n        <IonToast\n          cssClass='uiFont'\n          isOpen={this.state.showToast}\n          onDidDismiss={() => this.setState({ showToast: false })}\n          message={this.state.toastMessage}\n          duration={2000}\n        />\n      </IonApp>\n    );\n  }\n}\n\nconst mapStateToProps = (state: any /*, ownProps*/) => {\n  return {\n    shareTextModal: state.tmpSettings.shareTextModal,\n    settings: state.settings,\n    tmpSettings: state.tmpSettings,\n  }\n};\n\nconst AppOrig = connect(\n  mapStateToProps,\n)(_AppOrig);\n\n\nconst App = withRouter(_App);\n\nexport default App;\n","import { /*applyMiddleware,*/ createStore, Store } from \"redux\";\n\n//import { logger } from \"redux-logger\"\n//import thunk from \"redux-thunk\"\n//import promise from \"redux-promise-middleware\"\n\nimport reducer from \"./reducers\";\nimport Globals from \"../Globals\";\n\n//const middleware = applyMiddleware(promise(), thunk, logger)\n\nvar savedStore: Store;\n\nexport default function getSavedStore() {\n    var savedSettingsStr = localStorage.getItem(Globals.storeFile);\n    if (savedSettingsStr != null) {\n        savedStore = createStore(reducer, JSON.parse(savedSettingsStr));//, middleware)\n    }\n    else {\n        savedStore = createStore(reducer);//, middleware)\n    }\n\n    return savedStore;\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://cra.link/PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n  // [::1] is the IPv6 localhost address.\n  window.location.hostname === '[::1]' ||\n  // 127.0.0.0/8 are considered localhost for IPv4.\n  window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n            'worker. To learn more, visit https://cra.link/PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      /*\n      if(registration.waiting) {\n        const reg = registration.waiting;\n        reg.postMessage({ type: 'SKIP_WAITING' });\n        alert('Skip waiting.');\n      }*/\n\n      registration.onupdatefound = () => {\n        //alert('onupdatefound.');\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          console.log(`installingWorker stage changed: ${installingWorker.state}`);\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                'tabs for this page are closed. See https://cra.link/PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log('No internet connection found. App is running in offline mode.');\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from \"react-router-dom\";\nimport App, {serviceWorkCallbacks} from './App';\nimport Globals from './Globals';\nimport * as serviceWorker from './serviceWorkerRegistration';\n\n// Enable at the very start for logging most messages.\nGlobals.enableAppLog();\n\nReactDOM.render(<BrowserRouter><App /></BrowserRouter>, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.register({\n    onSuccess: (registration: ServiceWorkerRegistration) => { console.log('Precache app loaded!'); serviceWorkCallbacks.onSuccess(registration); },\n    onUpdate: (registration: ServiceWorkerRegistration) => { console.log('Found app updated!'); serviceWorkCallbacks.onUpdate(registration); },\n});\n","import { isPlatform, IonLabel } from '@ionic/react';\n\nconst pwaUrl = process.env.PUBLIC_URL || '';\nconst bugReportApiUrl = 'https://vh6ud1o56g.execute-api.ap-northeast-1.amazonaws.com/bugReportMailer';\n\nconst tweiDb = 'tweiDb';\nlet log = '';\n\nfunction logout(dispatch: Function) {\n  dispatch({\n    type: \"SET_KEY_VAL\",\n    key: 'cardNo',\n    val: '',\n  });\n\n  dispatch({\n    type: \"SET_KEY_VAL\",\n    key: 'cardEncrypt',\n    val: '',\n  });\n}\n\nasync function getFileFromIndexedDB(fileName: string) {\n  const dbOpenReq = indexedDB.open(tweiDb);\n\n  return new Promise(function (ok, fail) {\n    dbOpenReq.onsuccess = async function (ev) {\n      const db = dbOpenReq.result;\n\n      try {\n        const trans = db.transaction([\"store\"], 'readwrite');\n        let req = trans.objectStore('store').get(fileName);\n        req.onsuccess = async function (_ev) {\n          const data = req.result;\n          if (!data) {\n            console.error(`${fileName} loading failed!`);\n            console.error(new Error().stack);\n            return fail();\n          }\n          return ok(data);\n        };\n      } catch (err) {\n        console.error(err);\n      }\n    };\n  });\n}\n\nasync function saveFileToIndexedDB(fileName: string, data: any) {\n  const dbOpenReq = indexedDB.open(tweiDb);\n  return new Promise<void>((ok, fail) => {\n    dbOpenReq.onsuccess = async (ev: Event) => {\n      const db = dbOpenReq.result;\n\n      const transWrite = db.transaction([\"store\"], 'readwrite')\n      const reqWrite = transWrite.objectStore('store').put(data, fileName);\n      reqWrite.onsuccess = (_ev: any) => ok();\n      reqWrite.onerror = (_ev: any) => fail();\n    };\n  });\n}\n\nasync function removeFileFromIndexedDB(fileName: string) {\n  const dbOpenReq = indexedDB.open(tweiDb);\n  return new Promise<void>((ok, fail) => {\n    try {\n      dbOpenReq.onsuccess = (ev: Event) => {\n        const db = dbOpenReq.result;\n\n        const transWrite = db.transaction([\"store\"], 'readwrite')\n        try {\n          const reqWrite = transWrite.objectStore('store').delete(fileName);\n          reqWrite.onsuccess = (_ev: any) => ok();\n          reqWrite.onerror = (_ev: any) => fail();\n        } catch (err) {\n          console.error(err);\n        }\n      };\n    } catch (err) {\n      fail(err);\n    }\n  });\n}\n\nasync function clearIndexedDB() {\n  const dbOpenReq = indexedDB.open(tweiDb);\n  return new Promise<void>((ok, fail) => {\n    dbOpenReq.onsuccess = async (ev: Event) => {\n      const db = dbOpenReq.result;\n\n      const transWrite = db.transaction([\"store\"], 'readwrite')\n      const reqWrite = transWrite.objectStore('store').clear();\n      reqWrite.onsuccess = (_ev: any) => ok();\n      reqWrite.onerror = (_ev: any) => fail();\n    };\n  });\n}\n\nasync function clearAppData() {\n  localStorage.clear();\n  await clearIndexedDB();\n}\n\n//const electronBackendApi: any = (window as any).electronBackendApi;\n\nconst consoleLog = console.log.bind(console);\nconst consoleError = console.error.bind(console);\n\nfunction getLog() {\n  return log;\n}\n\nfunction enableAppLog() {\n  console.log = function () {\n    log += '----- Info ----\\n';\n    log += (Array.from(arguments)) + '\\n';\n    consoleLog.apply(console, arguments as any);\n  };\n\n  console.error = function () {\n    log += '----- Error ----\\n';\n    log += (Array.from(arguments)) + '\\n';\n    consoleError.apply(console, arguments as any);\n  };\n}\n\nfunction disableAppLog() {\n  log = '';\n  console.log = consoleLog;\n  console.error = consoleError;\n}\n\n//const webkit = (window as any).webkit;\nfunction copyToClipboard(text: string) {\n  try {\n    navigator.clipboard && navigator.clipboard.writeText(text);\n  } catch (error) {\n    console.error(error);\n  }\n}\n\nfunction isMacCatalyst() {\n  return isPlatform('ios') && navigator.platform === 'MacIntel';\n}\n\nconst Globals = {\n  pwaUrl,\n  bugReportApiUrl,\n  storeFile: 'tweiSettings.json',\n  getLog,\n  enableAppLog,\n  disableAppLog,\n  tweiDb,\n  appSettings: {\n    'theme': '佈景主題',\n    'uiFontSize': 'UI 字型大小',\n  } as Record<string, string>,\n  fetchErrorContent: (\n    <div className='contentCenter'>\n      <IonLabel>\n        <div>\n          <div>連線失敗!</div>\n          <div style={{ fontSize: 'var(--ui-font-size)', paddingTop: 24 }}>如果問題持續發生，請執行<a href={`${pwaUrl}/settings`} target=\"_self\">設定頁</a>的 app 異常回報功能。</div>\n        </div>\n      </IonLabel>\n    </div>\n  ),\n  logout,\n  updateApp: () => {\n    return new Promise(async resolve => {\n      navigator.serviceWorker.getRegistrations().then(async regs => {\n        const hasUpdates = await Promise.all(regs.map(reg => (reg.update() as any).then((newReg: ServiceWorkerRegistration) => {\n          return newReg.installing !== null || newReg.waiting !== null;\n        })));\n        resolve(hasUpdates.reduce((prev, curr) => prev || curr, false));\n      });\n    });\n  },\n  updateCssVars: (settings: any) => {\n    document.documentElement.style.cssText = `--ui-font-size: ${settings.uiFontSize}px;`\n  },\n  isMacCatalyst,\n  isTouchDevice: () => {\n    return (isPlatform('ios') && !isMacCatalyst()) || isPlatform('android');\n  },\n  isStoreApps: () => {\n    return isPlatform('pwa') || isPlatform('electron');\n  },\n  getFileFromIndexedDB,\n  saveFileToIndexedDB,\n  removeFileFromIndexedDB,\n  clearAppData,\n  copyToClipboard,\n};\n\nexport default Globals;\n","import React from 'react';\nimport { IonContent, IonHeader, IonPage, IonTitle, IonToolbar, IonList, IonItem, IonRange, IonIcon, IonLabel, IonToggle, IonButton, IonAlert, IonSelect, IonSelectOption, IonToast, withIonLifeCycle } from '@ionic/react';\nimport { connect } from 'react-redux';\nimport { RouteComponentProps } from 'react-router-dom';\nimport axios from 'axios';\n\nimport Globals from '../Globals';\nimport { helpCircle, text, barcode, colorPalette, shareSocial, bug, download, informationCircle } from 'ionicons/icons';\nimport './SettingsPage.css';\nimport PackageInfos from '../../package.json';\nimport { Settings } from '../models/Settings';\n\ninterface StateProps {\n  showBugReportAlert: boolean;\n  showFontLicense: boolean;\n  showClearAlert: boolean;\n  showToast: boolean;\n  toastMessage: string;\n}\n\ninterface Props {\n  dispatch: Function;\n  hasAppLog: boolean;\n  theme: number;\n  uiFontSize: number;\n  settings: Settings;\n  voiceURI: string;\n  speechRate: number;\n  mainVersion: string | null;\n  cbetaOfflineDbMode: boolean;\n}\n\ninterface PageProps extends Props, RouteComponentProps<{\n  tab: string;\n  path: string;\n  label: string;\n}> { }\n\nclass _SettingsPage extends React.Component<PageProps, StateProps> {\n  constructor(props: any) {\n    super(props);\n\n    this.state = {\n      showBugReportAlert: false,\n      showFontLicense: false,\n      showClearAlert: false,\n      showToast: false,\n      toastMessage: '',\n    };\n  }\n\n  ionViewWillEnter() {\n  }\n\n  async updateData() {\n  }\n\n  reportText = '';\n  render() {\n    return (\n      <IonPage>\n        <IonHeader>\n          <IonToolbar>\n            <IonTitle className='uiFont'>設定</IonTitle>\n          </IonToolbar>\n        </IonHeader>\n        <IonContent>\n          <IonList>\n            <IonItem>\n              <div tabIndex={0}></div>{/* Workaround for macOS Safari 14 bug. */}\n              <IonIcon icon={barcode} slot='start' />\n              <IonLabel className='ion-text-wrap uiFont'>手機條碼：{this.props.settings.cardNo}</IonLabel>\n              <IonButton fill='outline' shape='round' slot='end' size='large' className='uiFont' onClick={e => {\n                Globals.logout(this.props.dispatch);\n                this.setState({ showToast: true, toastMessage: '登出成功！' })\n              }}>登出</IonButton>\n            </IonItem>\n            <IonItem>\n              <div tabIndex={0}></div>{/* Workaround for macOS Safari 14 bug. */}\n              <IonIcon icon={shareSocial} slot='start' />\n              <IonLabel className='ion-text-wrap uiFont' onClick={async e => {\n                // Disable app update for Mac App Store submission.\n                /*\n                const hasUpdate = await Globals.updateApp();\n\n                if (!hasUpdate) {\n                  this.setState({ showToast: true, toastMessage: 'App 已是最新版' });\n                }*/\n              }}>PWA 版本: <a href=\"https://github.com/MrMYHuang/twei#history\" target=\"_new\">{PackageInfos.pwaVersion}</a></IonLabel>\n              <IonButton fill='outline' shape='round' slot='end' size='large' className='uiFont' onClick={e => {\n                this.props.dispatch({\n                  type: \"TMP_SET_KEY_VAL\",\n                  key: 'shareTextModal',\n                  val: {\n                    show: true,\n                    text: window.location.origin,\n                  },\n                });\n              }}>分享</IonButton>\n            </IonItem>\n            <IonItem hidden={!this.props.mainVersion}>\n              <div tabIndex={0}></div>{/* Workaround for macOS Safari 14 bug. */}\n              <IonIcon icon={informationCircle} slot='start' />\n              <IonLabel className='ion-text-wrap uiFont'>Backend app版本: {this.props.mainVersion}</IonLabel>\n              {/*<IonButton fill='outline' shape='round' slot='end' size='large' className='uiFont' onClick={e => {\n              }}>分享</IonButton>*/}\n            </IonItem>\n            <IonItem>\n              <div tabIndex={0}></div>{/* Workaround for macOS Safari 14 bug. */}\n              <IonIcon icon={bug} slot='start' />\n              <IonLabel className='ion-text-wrap uiFont'><a href=\"https://github.com/MrMYHuang/twei#report\" target=\"_new\">啟用 app 異常記錄</a></IonLabel>\n              <IonToggle slot='end' checked={this.props.hasAppLog} onIonChange={e => {\n                const isChecked = e.detail.checked;\n\n                if (this.props.hasAppLog === isChecked) {\n                  return;\n                }\n\n                isChecked ? Globals.enableAppLog() : Globals.disableAppLog();\n                this.props.dispatch({\n                  type: \"SET_KEY_VAL\",\n                  key: 'hasAppLog',\n                  val: isChecked\n                });\n              }} />\n            </IonItem>\n            <IonItem hidden={!this.props.settings.hasAppLog}>\n              <div tabIndex={0}></div>{/* Workaround for macOS Safari 14 bug. */}\n              <IonIcon icon={bug} slot='start' />\n              <IonLabel className='ion-text-wrap uiFont'>回報 app 異常記錄</IonLabel>\n              <IonButton fill='outline' shape='round' slot='end' size='large' className='uiFont' onClick={e => {\n                this.reportText = \"瀏覽器：\" + navigator.userAgent + \"\\n\\nApp版本：\" + PackageInfos.pwaVersion + \"\\n\\nApp設定：\" + JSON.stringify(this.props.settings) + \"\\n\\nLog：\\n\" + Globals.getLog();\n                this.setState({ showBugReportAlert: true });\n              }}>回報</IonButton>\n              <IonAlert\n                cssClass='uiFont'\n                backdropDismiss={false}\n                isOpen={this.state.showBugReportAlert}\n                header={'異常回報'}\n                subHeader='輸入您的 E-mail，以後續聯絡'\n                inputs={[\n                  {\n                    name: 'name0',\n                    type: 'email',\n                    placeholder: '例：abc@example.com'\n                  },\n                  {\n                    name: 'name1',\n                    type: 'textarea',\n                    placeholder: '請描述發生步驟'\n                  },\n                ]}\n                buttons={[\n                  {\n                    text: '送出',\n                    cssClass: 'primary uiFont',\n                    handler: async (value) => {\n                      if (!/^\\w+([-+.']\\w+)*@\\w+([-.]\\w+)*\\.\\w+([-.]\\w+)*$/.test(value.name0)) {\n                        this.setState({ showBugReportAlert: false, showToast: true, toastMessage: `錯誤，E-mail 不符格式！` });\n                        return\n                      }\n\n                      try {\n                        const axiosInstance = axios.create({ timeout: 10000 });\n                        await axiosInstance.post(Globals.bugReportApiUrl, {\n                          subject: `${PackageInfos.productName}異常記錄回報`,\n                          text: `E-mail: ${value.name0}\\n\\n發生步驟: ${value.name1}\\n\\n${this.reportText}`,\n                        });\n                        this.setState({ showBugReportAlert: false, showToast: true, toastMessage: `異常回報成功` });\n                      } catch (error) {\n                        console.error(error);\n                        this.setState({ showBugReportAlert: false, showToast: true, toastMessage: `異常回報失敗` });\n                      }\n                    },\n                  },\n                  {\n                    text: '取消',\n                    role: 'cancel',\n                    cssClass: 'secondary uiFont',\n                    handler: () => this.setState({ showBugReportAlert: false }),\n                  },\n                ]}\n              />\n            </IonItem>\n            <IonItem>\n              <div tabIndex={0}></div>{/* Workaround for macOS Safari 14 bug. */}\n              <IonIcon icon={download} slot='start' />\n              <div className='contentBlock'>\n                <div style={{ flexDirection: 'column' }}>\n                  <IonLabel className='ion-text-wrap uiFont'>App 設定</IonLabel>\n                  <div style={{ textAlign: 'right' }}>\n                    <IonButton fill='outline' shape='round' size='large' className='uiFont' onClick={async (e) => {\n                      const settingsJsonUri = `data:text/json;charset=utf-8,${encodeURIComponent(localStorage.getItem(Globals.storeFile) || '')}`;\n                      const a = document.createElement('a');\n                      a.href = settingsJsonUri;\n                      a.download = Globals.storeFile;\n                      a.click();\n                      a.remove();\n                    }}>匯出</IonButton>\n                    <input id='importJsonInput' type='file' accept='.json' style={{ display: 'none' }} onChange={async (ev) => {\n                      const file = ev.target.files?.item(0);\n                      const fileText = await file?.text() || '';\n                      try {\n                        // JSON text validation.\n                        JSON.parse(fileText);\n                        localStorage.setItem(Globals.storeFile, fileText);\n                        this.props.dispatch({ type: 'LOAD_SETTINGS' });\n                        setImmediate(() => {\n                          this.updateData();\n                        });\n                      } catch (e) {\n                        console.error(e);\n                        console.error(new Error().stack);\n                      }\n                      (document.getElementById('importJsonInput') as HTMLInputElement).value = '';\n                    }} />\n\n                    <IonButton fill='outline' shape='round' size='large' className='uiFont' onClick={(e) => {\n                      (document.querySelector('#importJsonInput') as HTMLInputElement).click();\n                    }}>匯入</IonButton>\n                    <IonButton fill='outline' shape='round' size='large' className='uiFont' onClick={(e) => {\n                      this.setState({ showClearAlert: true });\n                    }}>重置</IonButton>\n                    <IonAlert\n                      cssClass='uiFont'\n                      isOpen={this.state.showClearAlert}\n                      backdropDismiss={false}\n                      onDidPresent={(ev) => {\n                      }}\n                      header={'重置會還原app設定預設值並清除書籤、離線資料檔！確定重置？'}\n                      buttons={[\n                        {\n                          text: '取消',\n                          cssClass: 'primary uiFont',\n                          handler: (value) => {\n                            this.setState({\n                              showClearAlert: false,\n                            });\n                          },\n                        },\n                        {\n                          text: '重置',\n                          cssClass: 'secondary uiFont',\n                          handler: async (value) => {\n                            await Globals.clearAppData();\n                            this.props.dispatch({ type: 'DEFAULT_SETTINGS' });\n                            this.setState({ showClearAlert: false, showToast: true, toastMessage: \"清除成功!\" });\n                          },\n                        }\n                      ]}\n                    />\n                  </div>\n                </div>\n              </div>\n            </IonItem>\n            <IonItem>\n              <div tabIndex={0}></div>{/* Workaround for macOS Safari 14 bug. */}\n              <IonIcon icon={colorPalette} slot='start' />\n              <IonLabel className='ion-text-wrap uiFont'>{Globals.appSettings['theme']}</IonLabel>\n              <IonSelect slot='end'\n                value={+this.props.theme}\n                className='uiFont'\n                interface='popover'\n                interfaceOptions={{ cssClass: 'tweithemes' }}\n                onIonChange={e => {\n                  const value = +e.detail.value;\n                  // Important! Because it can results in rerendering of this component but\n                  // store states (this.props.theme) of this component is not updated yet! And IonSelect value will be changed\n                  // back to the old value and onIonChange will be triggered again!\n                  // Thus, we use this check to ignore this invalid change.\n                  if (+this.props.theme === value) {\n                    return;\n                  }\n\n                  this.props.dispatch({\n                    type: \"SET_KEY_VAL\",\n                    key: 'theme',\n                    val: value,\n                  });\n                }}>\n                <IonSelectOption className='uiFont cbeta' value={0}>綠底</IonSelectOption>\n                <IonSelectOption className='uiFont dark' value={1}>暗色</IonSelectOption>\n                <IonSelectOption className='uiFont light' value={2}>亮色</IonSelectOption>\n                <IonSelectOption className='uiFont oldPaper' value={3}>舊書</IonSelectOption>\n                <IonSelectOption className='uiFont marble' value={4}>大理石</IonSelectOption>\n              </IonSelect>\n            </IonItem>\n            <IonItem>\n              <div tabIndex={0}></div>{/* Workaround for macOS Safari 14 bug. */}\n              <IonIcon icon={text} slot='start' />\n              <div className=\"contentBlock\">\n                <div style={{ flexDirection: \"column\" }}>\n                  <IonLabel className='ion-text-wrap uiFont'>{Globals.appSettings['uiFontSize']}: {this.props.uiFontSize}</IonLabel>\n                  <IonRange min={12} max={64} pin={true} snaps={true} value={this.props.uiFontSize} onIonChange={e => {\n                    this.props.dispatch({\n                      type: \"SET_KEY_VAL\",\n                      key: 'uiFontSize',\n                      val: +e.detail.value,\n                    });\n                    setImmediate(() => {\n                      Globals.updateCssVars(this.props.settings);\n                    });\n                  }} />\n                </div>\n              </div>\n            </IonItem>\n            <IonItem>\n              <div tabIndex={0}></div>{/* Workaround for macOS Safari 14 bug. */}\n              <IonIcon icon={helpCircle} slot='start' />\n              <div className='uiFont'>\n                <div>關於</div>\n                <div><a href=\"https://github.com/MrMYHuang/twei#web-app\" target=\"_new\">程式安裝說明</a></div>\n                <div><a href=\"https://github.com/MrMYHuang/twei\" target=\"_new\">操作說明與開放原始碼</a></div>\n                <div>作者: Meng-Yuan Huang</div>\n                <div><a href=\"mailto:myh@live.com\" target=\"_new\">myh@live.com</a></div>\n              </div>\n            </IonItem>\n          </IonList>\n\n          <IonToast\n            cssClass='uiFont'\n            isOpen={this.state.showToast}\n            onDidDismiss={() => this.setState({ showToast: false })}\n            message={this.state.toastMessage}\n            duration={2000}\n          />\n        </IonContent>\n      </IonPage >\n    );\n  }\n};\n\nconst mapStateToProps = (state: any /*, ownProps*/) => {\n  return {\n    settings: state.settings,\n    hasAppLog: state.settings.hasAppLog,\n    theme: state.settings.theme,\n    uiFontSize: state.settings.uiFontSize,\n    speechRate: state.settings.speechRate,\n    bookmarks: state.settings.bookmarks,\n    voiceURI: state.settings.voiceURI,\n    mainVersion: state.tmpSettings.mainVersion,\n  }\n};\n\nconst SettingsPage = withIonLifeCycle(_SettingsPage);\n\nexport default connect(\n  mapStateToProps,\n)(SettingsPage);\n","var map = {\n\t\"./ion-action-sheet.entry.js\": [\n\t\t186,\n\t\t5\n\t],\n\t\"./ion-alert.entry.js\": [\n\t\t187,\n\t\t6\n\t],\n\t\"./ion-app_8.entry.js\": [\n\t\t188,\n\t\t7\n\t],\n\t\"./ion-avatar_3.entry.js\": [\n\t\t189,\n\t\t17\n\t],\n\t\"./ion-back-button.entry.js\": [\n\t\t190,\n\t\t18\n\t],\n\t\"./ion-backdrop.entry.js\": [\n\t\t191,\n\t\t43\n\t],\n\t\"./ion-button_2.entry.js\": [\n\t\t192,\n\t\t19\n\t],\n\t\"./ion-card_5.entry.js\": [\n\t\t193,\n\t\t20\n\t],\n\t\"./ion-checkbox.entry.js\": [\n\t\t194,\n\t\t21\n\t],\n\t\"./ion-chip.entry.js\": [\n\t\t195,\n\t\t22\n\t],\n\t\"./ion-col_3.entry.js\": [\n\t\t196,\n\t\t44\n\t],\n\t\"./ion-datetime_3.entry.js\": [\n\t\t197,\n\t\t10\n\t],\n\t\"./ion-fab_3.entry.js\": [\n\t\t198,\n\t\t23\n\t],\n\t\"./ion-img.entry.js\": [\n\t\t199,\n\t\t45\n\t],\n\t\"./ion-infinite-scroll_2.entry.js\": [\n\t\t200,\n\t\t46\n\t],\n\t\"./ion-input.entry.js\": [\n\t\t201,\n\t\t24\n\t],\n\t\"./ion-item-option_3.entry.js\": [\n\t\t202,\n\t\t25\n\t],\n\t\"./ion-item_8.entry.js\": [\n\t\t203,\n\t\t26\n\t],\n\t\"./ion-loading.entry.js\": [\n\t\t204,\n\t\t27\n\t],\n\t\"./ion-menu_3.entry.js\": [\n\t\t205,\n\t\t28\n\t],\n\t\"./ion-modal.entry.js\": [\n\t\t206,\n\t\t8\n\t],\n\t\"./ion-nav_2.entry.js\": [\n\t\t207,\n\t\t14\n\t],\n\t\"./ion-popover.entry.js\": [\n\t\t208,\n\t\t9\n\t],\n\t\"./ion-progress-bar.entry.js\": [\n\t\t209,\n\t\t29\n\t],\n\t\"./ion-radio_2.entry.js\": [\n\t\t210,\n\t\t30\n\t],\n\t\"./ion-range.entry.js\": [\n\t\t211,\n\t\t31\n\t],\n\t\"./ion-refresher_2.entry.js\": [\n\t\t212,\n\t\t11\n\t],\n\t\"./ion-reorder_2.entry.js\": [\n\t\t213,\n\t\t16\n\t],\n\t\"./ion-ripple-effect.entry.js\": [\n\t\t214,\n\t\t47\n\t],\n\t\"./ion-route_4.entry.js\": [\n\t\t215,\n\t\t32\n\t],\n\t\"./ion-searchbar.entry.js\": [\n\t\t216,\n\t\t33\n\t],\n\t\"./ion-segment_2.entry.js\": [\n\t\t217,\n\t\t34\n\t],\n\t\"./ion-select_3.entry.js\": [\n\t\t218,\n\t\t35\n\t],\n\t\"./ion-slide_2.entry.js\": [\n\t\t219,\n\t\t48\n\t],\n\t\"./ion-spinner.entry.js\": [\n\t\t220,\n\t\t13\n\t],\n\t\"./ion-split-pane.entry.js\": [\n\t\t221,\n\t\t49\n\t],\n\t\"./ion-tab-bar_2.entry.js\": [\n\t\t222,\n\t\t36\n\t],\n\t\"./ion-tab_2.entry.js\": [\n\t\t223,\n\t\t15\n\t],\n\t\"./ion-text.entry.js\": [\n\t\t224,\n\t\t37\n\t],\n\t\"./ion-textarea.entry.js\": [\n\t\t225,\n\t\t38\n\t],\n\t\"./ion-toast.entry.js\": [\n\t\t226,\n\t\t39\n\t],\n\t\"./ion-toggle.entry.js\": [\n\t\t227,\n\t\t12\n\t],\n\t\"./ion-virtual-scroll.entry.js\": [\n\t\t228,\n\t\t50\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 91;\nmodule.exports = webpackAsyncContext;","var map = {\n\t\"./ion-icon.entry.js\": [\n\t\t229,\n\t\t57\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 93;\nmodule.exports = webpackAsyncContext;"],"sourceRoot":""}